# Product Context

Этот файл предоставляет общий обзор проекта и ожидаемого продукта. Изначально он основан на файле технического задания tetris-blocks-react-tz.md. Файл будет обновляться по мере развития проекта и должен использоваться для информирования всех участников о целях и контексте проекта.
2025-04-12 21:49:00 - Первоначальное создание файла.
2025-04-13 16:57:00 - Обновление после завершения рефакторинга GameController.
2025-04-14 01:02:00 - Обновление текущего статуса проекта и детализация планов развития.

## Название проекта

**"Тетрис-блоки"** - игра-головоломка на чистом React.

## Проектная цель

Разработать увлекательную казуальную игру-головоломку "Тетрис-блоки", в которой игроки размещают различные фигуры на игровой сетке 8x8, очищают заполненные строки и столбцы, и набирают очки. Игра должна иметь яркий, современный визуальный стиль и быть доступной как на мобильных устройствах, так и на ПК.

## Ключевые особенности

* Игровая сетка 8x8 с механикой размещения блоков через drag-and-drop
* 8 типов фигур разных форм и цветов, сгенерированных с различной ориентацией
* 3 доступные фигуры на выбор в любой момент времени
* Автоматическое очищение заполненных строк и столбцов с начислением очков
* Система комбо и множителей для начисления очков
* Яркий визуальный стиль с плавными анимациями
* Полная адаптивность для мобильных и десктопных устройств
* Интеграция с платформой Яндекс Игры
* Система достижений и наград
* Интерактивный обучающий режим (туториал)
* Поддержка трех языков: русский, английский и турецкий

## Общая архитектура

* Компонентная архитектура React с функциональными компонентами и хуками
* Разделение ответственности между компонентами
* Иммутабельное управление состоянием
* Модульная структура с четко разделенными слоями:
  - Компоненты UI (разделены на общие компоненты и игровые)
  - Адаптивные компоненты для мобильных и десктопных устройств
  - Игровая логика (вынесена в отдельные хуки и core-модули)
  - Управление состоянием (специализированные хуки для каждого аспекта игры)
  - Интеграция с Яндекс Играми

### Технологический стек

* React для пользовательского интерфейса
* TypeScript для статической типизации
* CSS/SCSS для стилей
* React Hooks для управления состоянием
* Styled Components или CSS Modules для стилизации
* Framer Motion или React Spring для анимаций
* React DnD или react-draggable для drag-and-drop
* SDK Яндекс Игр для интеграции с платформой

### Целевые платформы

* Веб-браузеры (десктоп и мобильные)
* Публикация на платформе Яндекс Игры
* Адаптивный дизайн для различных размеров экрана

## Текущий статус проекта

### Завершенные этапы:
* Первый этап разработки: создание базовой структуры проекта и основных компонентов
* Реализация основной игровой логики и механики размещения фигур
* Создание интерфейса для мобильных и десктопных устройств
* Рефакторинг GameController.tsx с разделением на MobileGameLayout и DesktopGameLayout
* Реализация хуков для управления различными аспектами игры (фигуры, состояние, очки)
* Оптимизация механизма перемещения фигур с использованием transform
* Создание детального плана дальнейших действий в next-steps.md

### Текущий этап (на 14.04.2025):
* Оптимизация производительности приложения для различных устройств
* Профилирование и выявление узких мест в производительности
* Оптимизация ререндеров компонентов с использованием React.memo, useMemo и useCallback
* Улучшение алгоритмов проверки и очистки линий
* Добавление анимаций для визуальной обратной связи (размещение фигур, очистка линий, начисление очков)

### Ближайшие планы (2-4 недели):
* Добавление звуковых эффектов для улучшения игрового опыта
* Расширение обучающего режима (туториала) с интерактивными элементами
* Улучшение визуального стиля блоков и фигур (3D-эффекты, тени и блики)
* Реализация системы сохранения прогресса и рекордов в localStorage

### Перспективные планы (1-2 месяца):
* Создание системы достижений и уведомлений
* Подготовка к интеграции с платформой Яндекс Игры
* Проведение тестирования и оптимизации производительности
* Улучшение доступности (a11y)

## Структура компонентов

Текущая структура компонентов включает:
* **Экраны**: Game, Main, Tutorial
* **Игровые компоненты**: Grid, Shape, Preview, Score, GameOverModal, GameOverPanel, GhostShape, LineHighlighter
* **Компоненты представления**: MobileGameLayout, DesktopGameLayout
* **UI-компоненты**: Button, Modal, Layout
* **Хуки**: useGameState, useShapes, useScore, useDragAndDrop, useGhostPosition
* **Ядро игровой логики**: gameLogic.ts, shapeGenerator.ts, scoreSystem.ts

## Особенности реализации

* Игра не включает функциональность поворота фигур пользователем - фигуры генерируются с различными ориентациями
* Использован механизм drag-and-drop с предпросмотром возможности размещения ("призрак" фигуры)
* Реализована оптимизированная система перемещения фигур с использованием CSS transform
* Добавлен механизм синхронного хранения состояния с помощью ref для преодоления асинхронности React
* Адаптивный дизайн обеспечивается через разделение на MobileGameLayout и DesktopGameLayout